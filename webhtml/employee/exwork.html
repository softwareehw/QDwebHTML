<!doctype html>
<html>
    <head>
    <meta charset="utf-8">
    <title>加班申请</title>
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../../css/animate.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/plugins/summernote/summernote-bs4.css" rel="stylesheet">
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../../css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../../css/plugins/fullcalendar/fullcalendar.css" rel="stylesheet">
    <link href="../../css/plugins/fullcalendar/fullcalendar.print.css" rel='stylesheet' media='print'>
    <link href="../../css/animate.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">




    <!-- Mainly scripts -->
    <script src="../../js/jquery-3.1.1.min.js"></script>
    <script src="../../js/popper.min.js"></script>
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="../../js/plugins/summernote/summernote-bs4.js"></script>
    <script src="../../js/plugins/fullcalendar/moment.min.js"></script>
    <script src="../../js/plugins/iCheck/icheck.min.js"></script>


    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- import Vue before Element -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!-- import JavaScript -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>


    <!-- Custom and plugin javascript -->
    <script src="../../js/inspinia.js"></script>
    <script src="../../js/plugins/pace/pace.min.js"></script>
    <script src="../../js/plugins/fullcalendar/fullcalendar.min.js"></script>
    <!-- jQuery UI -->
    <script src="../../js/plugins/jquery-ui/jquery-ui.min.js"></script>
    <script>
        $(document).ready(function(){
            $('.summernote').summernote();
       });
    </script>
    </head>

    <body>
    <div id="wrapper" class="gray-bg">
      <div id="page-wrapper" class="gray-bg" style="margin: 0;">
        <div class="wrapper wrapper-content animated fadeInRight"  id="app">
          <div class="row">
			  <div class="col-lg-12">
              <div class="ibox ">
                <div class="ibox-title">
                  <h5>加班申请表 <small>请在此处填报加班请假</small></h5>
                  <div class="ibox-tools"> <a class="col7lapse-link"> <i class="fa fa-chevron-up"></i> </a> <a class="dropdown-toggle" data-toggle="dropdown" href="#"> <i class="fa fa-wrench"></i> </a>
                    <ul class="dropdown-menu dropdown-user">
                      <li><a href="#" class="dropdown-item">Config option 1</a> </li>
                      <li><a href="#" class="dropdown-item">Config option 2</a> </li>
                    </ul>
                    <a class="close-link"> <i class="fa fa-times"></i> </a> </div>
                </div>
                <div class="ibox-content">
                  <div class="row">
                    <div class="col-sm-5 b-r">
                      <h3 class="m-t-none m-b">加班申请</h3>
                      <p>Sign in today for more expirience.</p>
                      <form role="form">
                        <div class="form-group">
                          <label>请假类型</label>
                          <input type="email" placeholder="简要的说明请假类型" class="form-control">
                        </div>
 <div class="form-group" >
    <label>申请加班日期</label>
 <el-date-picker
  style="width:100%"
      v-model="value1"
      type="datetimerange"
      range-separator="-"
      start-placeholder="开始日期"
  format="yyyy-MM-dd HH:mm:ss"
  value-format="yyyy-MM-dd HH:mm:ss"
      end-placeholder="结束日期"> </el-date-picker>
</div>


                        <div class="form-group" >
                          <label>加班说明</label>
                          <div class="summernote">
                            <h3>Lorem Ipsum is simply</h3>
                            dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the industry's</strong> standard dummy text ever since the 1500s,
                            when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic
                            typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with <br/>
                            <br/>
                            <ul>
                              <li>Remaining essentially unchanged</li>
                              <li>Make a type specimen book</li>
                              <li>Unknown printer</li>
                            </ul>
                          </div>
                        </div>





                        <button class="btn btn-sm btn-primary float-right m-t-n-xs" style="margin-right: 20px;" type="button"><strong> 暂存 </strong></button>
                      </form>
                    </div>
                    <div class="col-sm-7">
                      <div class="row">
                        <div class="ibox-content no-padding">
                          <h3 class="m-t-none m-b">加班说明</h3>
                          <div id="calendar"></div>
                          <div style="margin-top: 20px;margin-right: 20px;">
                            <button class="btn btn-sm btn-primary float-right m-t-n-xs" type="submit"  v-on:click="newExworkApp" ><strong> 提交申请 </strong></button>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</body>
    <script>

    $(document).ready(function() {

            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-green',
                radioClass: 'iradio_square-green'
            });

        /* initialize the external events
         -----------------------------------------------------------------*/


        $('#external-events div.external-event').each(function() {

            // store data so the calendar knows to render an event upon drop
            $(this).data('event', {
                title: $.trim($(this).text()), // use the element's text as the event title
                stick: true // maintain when user navigates (see docs on the renderEvent method)
            });

            // make the event draggable using jQuery UI
            $(this).draggable({
                zIndex: 1111999,
                revert: true,      // will cause the event to go back to its
                revertDuration: 0  //  original position after the drag
            });

        });


        /* initialize the calendar
         -----------------------------------------------------------------*/
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            editable: true,
            droppable: true, // this allows things to be dropped onto the calendar
            drop: function() {
                // is the "remove after drop" checkbox checked?
                if ($('#drop-r9move').is(':checked')) {
                    // if so, remove the element from the "Draggable Events" list
                    $(this).remove();
                }
            },
            events: [
                {
                    title: 'All Day Event',
                    start: new Date(y, m, 1)
                },
                {
                    title: 'Long Event',
                    start: new Date(y, m, d-5),
                    end: new Date(y, m, d-2)
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d-3, 16, 0),
                    allDay: false
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d+4, 16, 0),
                    allDay: false
                },
                {
                    title: 'Meeting',
                    start: new Date(y, m, d, 10, 30),
                    allDay: false
                },
                {
                    title: 'Lunch',
                    start: new Date(y, m, d, 12, 0),
                    end: new Date(y, m, d, 14, 0),
                    allDay: false
                },
                {
                    title: 'Birthday Party',
                    start: new Date(y, m, d+1, 19, 0),
                    end: new Date(y, m, d+1, 22, 30),
                    allDay: false
                },
                {
                    title: 'Click for Google',
                    start: new Date(y, m, 28),
                    end: new Date(y, m, 29),
                    url: 'http://google.com/'
                }
            ]
        });


    });

</script>

 <script type="text/JavaScript">
    new Vue({
      el: '#app',
      data:{
      pickerOptions: {
          shortcuts: [{
            text: '最近一周',
            onClick(picker) {
              const end = new Date();
              const start = new Date();
              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
              picker.$emit('pick', [start, end]);
            }
          }, {
            text: '最近一个月',
            onClick(picker) {
              const end = new Date();
              const start = new Date();
              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
              picker.$emit('pick', [start, end]);
            }
          }, {
            text: '最近三个月',
            onClick(picker) {
              const end = new Date();
              const start = new Date();
              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
              picker.$emit('pick', [start, end]);
            }
          }]
        },
        value1: ''
      },
    methods:{
        ///新建一个加班申请
        newExworkApp:function(){
            var jsono={};       
            jsono["startTime"]=this.value1[0];
            jsono["endTime"]=this.value1[1];
            jsono["applicatedId"]="1";////这个值未来要改
            jsono["ewReason"]="我就是想加班";
            jQuery.ajax({
            type:"POST",
            url:"http://39.105.38.34:8080/api/v1/EWs/employees/1",
            contentType:"application/json",
            // xhrFields: {
            //     withCredentials: true
            // },
            // crossDomain:true,
            dataType:"json",
            data:JSON.stringify(jsono),
            success:function(data){
                console.log("success");
            },
            error:function(data){
                console.log("fail");
            }
        });
        }
    },
        created:function(){

        }

    })
  </script>


</html>
